# OpenACC Asynchronous code

 OpenACC code that demonstrates three different execution patterns for performance comparison with Nsight Systems profiling
```
- Synchronous Version: Traditional blocking execution where data transfers and kernels execute sequentially
- Asynchronous Version: Uses async queues to overlap computation and enable non-blocking execution
- Advanced Asynchronous Version: Uses multiple streams for even better parallelism and overlap
```
## How to install
```
nvc -acc -Minfo=accel -fast -o openacc_test openacc_test.c
```

## Nsys profile 
``` bash
nsys profile \
  --trace=cuda,openacc,nvtx \
  --nic-metrics=true \
  --stats=true \
  --force-overwrite=true \
  --output=profile_with_nic \
  ./openacc_test
```

## Notes

The --nic-metrics=true option in Nsight Systems is useful for profiling network communication performance, especially in HPC or distributed GPU applications where inter-node data transfer plays a significant role.

--nic-metrics=true collects metrics such as:

``` bash
- Packet send/receive rate
- Bandwidth utilization
- Error counts
```

## nics is Useful
1. Understand Network Bottlenecks
See how much time your application spends sending/receiving data over the network.

Identify if slowdowns are caused by communication delays rather than GPU or CPU performance.

2. Correlate Network Traffic with Compute Work
Overlay NIC activity with GPU kernels, MPI calls, or CPU threads.

Find whether network transfer overlaps (or stalls) computation.

3. Optimize Distributed Workloads
Helps you optimize data exchange patterns in:

MPI applications

Deep learning training (e.g., Horovod, DDP)

Scientific simulations with frequent halo exchange

4. Useful on InfiniBand or NVLink-over-Fabric Clusters
Especially relevant on systems with Mellanox/NVIDIA ConnectX NICs, which Nsight Systems supports well.

If your cluster uses InfiniBand, it gives insight into link usage, throughput, and congestion.

5. Profiling CPU/GPU â†” Network Balance
NIC metrics help answer:

Is your GPU waiting on data?

Are you underutilizing the network?

Could you restructure communication to overlap with computation?

## What You Get in the Report
With --nic-metrics=true, the Nsight report may include:

Bandwidth (GB/s) of NIC transfers

Packet counts and sizes

NIC queue activity

Visual correlation with GPU and CPU timeline


